<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大衍筮法互動占卜</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f9f9f9; }
        #container { max-width: 900px; margin: 0 auto; }
        #instructions { background-color: #fff; padding: 15px; border: 1px solid #ddd; margin-bottom: 20px; }
        #taiji { background-color: #fff; padding: 10px; border: 1px solid #ddd; margin-bottom: 10px; text-align: center; }
        #taiji canvas { border: 1px solid #000; background-color: #fff; }
        #canvas { border: 1px solid #000; background-color: #fff; cursor: pointer; }
        #controls { margin-top: 20px; }
        button { padding: 10px 20px; margin-right: 10px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #45a049; }
        button:disabled { background-color: #ccc; cursor: not-allowed; }
        #stepInfo { margin-top: 10px; }
        #currentYaos { margin-top: 20px; background-color: #fff; padding: 15px; border: 1px solid #ddd; }
        #result { margin-top: 30px; font-size: 18px; }
        .gua { display: inline-block; margin: 20px; text-align: left; vertical-align: top; width: 400px; }
        .yao { font-size: 24px; margin: 5px 0; }
        .old { color: red; } /* 變爻用紅色標識 */
        .yao-text { margin-left: 10px; font-size: 16px; }
        .gua-ci, .xiang-zhuan { margin: 10px 0; }
        .collapsible { cursor: pointer; font-weight: bold; }
        .content { display: none; padding: 10px; background-color: #f5f5f5; border: 1px solid #ddd; }
        .content.show { display: block; }
        .tooltip { position: relative; display: inline-block; border-bottom: 1px dotted black; }
        .tooltip .tooltiptext { visibility: hidden; width: 200px; background-color: #555; color: #fff; text-align: center; padding: 5px; border-radius: 6px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -100px; }
        .tooltip:hover .tooltiptext { visibility: visible; }
    </style>
</head>
<body>
    <div id="container">
        <h1>大衍筮法互動占卜</h1>
        <div id="instructions">
            <p><strong>周易·繫辭傳原文：</strong> 大衍之數五十，其用四十有九。分而為二以象兩，掛一以象三，揲之以四以象四時，歸奇於扐以象閏。五歲再閏，故再扐而後掛。</p>
            <p><strong>操作說明：</strong> 這是基於周易大衍筮法的互動模擬。準備50根蓍草，但實際使用49根（1根象徵太極不用）。</p>
            <p>每一步都會有提示和象徵意義。請按照步驟操作，共需重複6次以得到六爻卦。結果將顯示卦名、卦辭、象傳及各爻的爻辭與象傳。</p>
            <p><strong>分堆方式：</strong> 在畫布上顯示49根蓍草（綠色線條）。用鼠標點擊或觸摸畫布上的位置，系統會根據點擊位置將蓍草分成左右兩堆（點擊點左邊為左堆，右邊為右堆）。</p>
        </div>
        <div id="taiji">
            <p><strong>象徵太極的1根蓍草（不使用）</strong></p>
            <canvas id="taijiCanvas" width="50" height="200"></canvas>
        </div>
        <canvas id="canvas" width="800" height="200"></canvas>
        <div id="controls">
            <button id="startBtn">開始新卦（重置49根）</button>
            <button id="nextStepBtn" disabled>下一步</button>
            <button id="resetBtn">重置當前步驟</button>
        </div>
        <div id="stepInfo"></div>
        <div id="currentYaos">
            <h3>當前爻結果（從下往上）</h3>
            <div id="yaosList"></div>
        </div>
        <div id="result"></div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const taijiCanvas = document.getElementById('taijiCanvas');
        const taijiCtx = taijiCanvas.getContext('2d');
        const startBtn = document.getElementById('startBtn');
        const nextStepBtn = document.getElementById('nextStepBtn');
        const resetBtn = document.getElementById('resetBtn');
        const stepInfo = document.getElementById('stepInfo');
        const yaosList = document.getElementById('yaosList');
        const result = document.getElementById('result');

        let stalks = 49; // 當前蓍草數
        let totalStalks = 49; // 初始
        let leftPile = 0;
        let rightPile = 0;
        let hung = 0;
        let remainders = [];
        let currentChange = 0; // 當前第幾次變（0-2，三次一爻）
        let currentYao = 0; // 當前第幾爻（0-5）
        let yaos = []; // 儲存六爻數值 [9,8,7,6,...]
        let state = 'divide'; // 狀態: divide, hang, count, combine

        const guaNames = [
            '乾', '坤', '屯', '蒙', '需', '訟', '師', '比', '小畜', '履',
            '泰', '否', '同人', '大有', '謙', '豫', '隨', '蠱', '臨', '觀',
            '噬嗑', '賁', '剝', '復', '無妄', '大畜', '頤', '大過', '坎', '離',
            '咸', '恒', '遯', '大壯', '晉', '明夷', '家人', '睽', '蹇', '解',
            '損', '益', '夬', '姤', '萃', '升', '困', '井', '革', '鼎',
            '震', '艮', '漸', '歸妹', '豐', '旅', '巽', '兌', '渙', '節',
            '中孚', '小過', '既濟', '未濟'
        ];

        const guaData = {
            "乾": {
                "guaCi": "乾，元亨利貞。",
                "xiangZhuan": "天行健，君子以自強不息。",
                "tuanZhuan": "大哉乾元，萬物資始，乃統天。雲行雨施，品物流形。大明終始，六位時成。時乘六龍以禦天。乾道變化，各正性命，保合太和，乃利貞。首出庶物，萬國鹹寧。",
                "yaoCi": [
                    "初九：潛龍勿用。",
                    "九二：見龍在田，利見大人。",
                    "九三：君子終日乾乾，夕惕若，厲無咎。",
                    "九四：或躍在淵，無咎。",
                    "九五：飛龍在天，利見大人。",
                    "上九：亢龍有悔。",
                    "用九：見群龍無首，吉。"
                ],
                "yaoXiang": [
                    "小象曰：潛龍勿用，陽在下也。",
                    "小象曰：見龍在田，德施普也。",
                    "小象曰：終日乾乾，反復道也。",
                    "小象曰：或躍在淵，進無咎也。",
                    "小象曰：飛龍在天，大人造也。",
                    "小象曰：亢龍有悔，盈不可久也。",
                    "小象曰：用九，天德不可為首也。"
                ]
            },
            "坤": {
                "guaCi": "坤，元亨利牝馬之貞。君子有攸往，先迷後得主，利西南得朋，東北喪朋。安貞吉。",
                "xiangZhuan": "地勢坤，君子以厚德載物。",
                "tuanZhuan": "至哉坤元，萬物資生，乃順承天。坤厚載物，德合無疆。含弘光大，品物鹹亨。牝馬地類，行地無疆。君子以西南得朋，乃與類行，東北喪朋，乃終有慶。安貞之吉，應地無疆。",
                "yaoCi": [
                    "初六：履霜，堅冰至。",
                    "六二：直方大，不習無不利。",
                    "六三：含章可貞，或從王事，無成有終。",
                    "六四：括囊；無咎無譽。",
                    "六五：黃裳，元吉。",
                    "上六：龍戰於野，其血玄黃。",
                    "用六：利永貞。"
                ],
                "yaoXiang": [
                    "小象曰：履霜堅冰，陰始凝也。",
                    "小象曰：六二之動，直以方也。",
                    "小象曰：含章可貞，以時發也。",
                    "小象曰：括囊無咎，慎不害也。",
                    "小象曰：黃裳元吉，文在中也。",
                    "小象曰：龍戰於野，其道窮也。",
                    "小象曰：用六永貞，以大終也。"
                ]
            },
            "屯": {
                "guaCi": "屯，元亨利貞。勿用有攸往，利建侯。",
                "xiangZhuan": "雲雷，屯；君子以經綸。",
                "tuanZhuan": "屯，剛柔始交而難生。動乎險中，大亨以正，天道尚賢。",
                "yaoCi": [
                    "初九：磐桓，利居貞，利建侯。",
                    "九二：屯，利紓小，貞吉。",
                    "六三：即鹿無虞，唯入于林中，君子幾不如舍，往吝。",
                    "六四：乘馬班如，求婚媾，往吉，無不利。",
                    "六五：屯其膏，小貞吉，大貞凶。",
                    "上六：乘馬班如，泣血漓如。"
                ],
                "yaoXiang": [
                    "小象曰：雖磐桓，志行正也。以貴下賤，大得志也。",
                    "小象曰：屯，吉，行正也。",
                    "小象曰：即鹿無虞，以從獸也，君子舍之，往吝窮也。",
                    "小象曰：求而往，明也。",
                    "小象曰：屯其膏，施未光也。",
                    "小象曰：泣血漓如，慍之久也。"
                ]
            },
            "蒙": {
                "guaCi": "蒙，亨。匪我求童蒙，童蒙求我。初筮告，再三瀆，瀆則不告。利貞。",
                "xiangZhuan": "山下出泉，蒙；君子以果行育德。",
                "tuanZhuan": "蒙，剛柔相摩，始入而蒙。剛中而柔外也。蒙亨，以亨行，時中也。匪我求童蒙，童蒙求我，志也。",
                "yaoCi": [
                    "初六：發蒙，利用刑人，用說桎梏，以往吝。",
                    "九二：包蒙，吉。納婦，吉。子克家。",
                    "六三：勿用取女，見金夫，不有躬，無攸利。",
                    "六四：困蒙，吝。",
                    "六五：童蒙，吉。",
                    "上九：擊蒙，不利為寇，利禦寇。"
                ],
                "yaoXiang": [
                    "小象曰：利用刑人，以正法也。",
                    "小象曰：子克家，剛柔接也。",
                    "小象曰：勿用取女，行不順也。",
                    "小象曰：困蒙之吝，豫也。",
                    "小象曰：童蒙之吉，順以巽也。",
                    "小象曰：利用禦寇，順相保也。"
                ]
            },
            "需": {
                "guaCi": "需，有孚，光亨，貞吉。利涉大川。",
                "xiangZhuan": "雲上於天，需；君子以飲食宴樂。",
                "tuanZhuan": "需，須也。險在前也，止而待之，需，寬中有險，能止能行，德之盛也。",
                "yaoCi": [
                    "初九：需于郊，利用恆，無咎。",
                    "九二：需于沙，小有言，終吉。",
                    "九三：需於泥，致寇至。",
                    "六四：需於血，出自穴。",
                    "九五：需于酒食，貞吉。",
                    "上六：入於穴，有不速之客三人來，敬之終吉。"
                ],
                "yaoXiang": [
                    "小象曰：需於郊，不犯難行也。",
                    "小象曰：需于沙，位不當也。",
                    "小象曰：需於泥，災在外也，自我致寇，敬慎不敗也。",
                    "小象曰：需於血，順以聽也。",
                    "小象曰：酒食貞吉，剛柔得中也。",
                    "小象曰：不速之客來，敬之終吉，雖不當位未大有咎也。"
                ]
            },
            "訟": {
                "guaCi": "訟，有孚窒惕，中吉，終凶。利見大人，不利涉大川。",
                "xiangZhuan": "天與水違行，訟；君子以做事。",
                "tuanZhuan": "訟，剛來而柔止，得中以亨，理而曆明，宜大人以吉。",
                "yaoCi": [
                    "初六：不永所事，小有言，終吉。",
                    "九二：不克訟，歸而逋，其邑人三百戶，無眚。",
                    "六三：食舊德，貞厲終吉，或從王事，無成。",
                    "九四：不克訟，復即命，渝安貞，吉。",
                    "九五：訟，元吉。",
                    "上九：或錫之鞶帶，終朝三褫。"
                ],
                "yaoXiang": [
                    "小象曰：不永所事，訟不可長也。",
                    "小象曰：不克訟，歸逋竊也。",
                    "小象曰：食舊德，從上貞也。",
                    "小象曰：復即命，未失道也。",
                    "小象曰：訟元吉，以中正也。",
                    "小象曰：以信受敵，夷敗也。"
                ]
            },
            "師": {
                "guaCi": "師，貞，丈人吉，無咎。",
                "xiangZhuan": "地中有水，師；君子以容多眾。",
                "tuanZhuan": "師，眾也，貞正而能勝，丈人吉無咎。",
                "yaoCi": [
                    "初六：師出以律，否臧凶。",
                    "九二：在師中，吉無咎，王三錫。",
                    "六三：師或舊，厲無咎。",
                    "六四：師左次，無咎。",
                    "六五：田有禽，利執言，無咎，長子帥師，弟子輿屍，貞凶。",
                    "上六：大君有命，開國承家，小人勿用。"
                ],
                "yaoXiang": [
                    "小象曰：師出以律，失律凶也。",
                    "小象曰：在師中，吉行也。",
                    "小象曰：師或舊，知謀大也。",
                    "小象曰：左次無咎，未失常也。",
                    "小象曰：長子帥師，以中正也。",
                    "小象曰：大君有命，以正功也；小人勿用，必亂邦也。"
                ]
            },
            "比": {
                "guaCi": "比，吉。原筮，元永貞，無咎。利涉大川，主不自來，從自取。失道，後見君子。",
                "xiangZhuan": "地上有水，比；君子以朋友講習。",
                "tuanZhuan": "比，輔也，下順從也，故吉。比元永貞無咎也，利涉大川，才得中也。",
                "yaoCi": [
                    "初六：有孚比之，無咎。",
                    "六二：比之自內，貞吉。",
                    "六三：比之匪人。",
                    "六四：外比之，貞吉。",
                    "九五：顯比，王用三驅，失前禽，邑人不誡，吉。",
                    "上六：比之無首，凶。"
                ],
                "yaoXiang": [
                    "小象曰：比之初六，有孚也。",
                    "小象曰：比之自內，不自失也。",
                    "小象曰：比之匪人，不亦傷乎。",
                    "小象曰：外比於賢，尊賢也。",
                    "小象曰：顯比之吉，位正中也。",
                    "小象曰：比之無首，無所終也。"
                ]
            },
            "小畜": {
                "guaCi": "小畜，亨。密雲不雨，自我西郊。",
                "xiangZhuan": "風行天上，小畜；君子以懿文德。",
                "tuanZhuan": "小畜，柔得位而上下應之，曰小畜。剛中而志行，乃亨。其密雲不雨，自我西郊，施未行也。",
                "yaoCi": [
                    "初九：復自道，何其咎？吉。",
                    "九二：牽複，吉。",
                    "九三：輿說輻，夫妻反目。",
                    "六四：有孚，血去，惕出，無咎。",
                    "九五：有孚，惠心，勿問元吉。有孚，惠我德。",
                    "上九：既雨既處，尚徳載。婦貞厲。月幾望，君子征凶。"
                ],
                "yaoXiang": [
                    "小象曰：復自道，其義吉也。",
                    "小象曰：牽複在中，亦不自失也。",
                    "小象曰：夫妻反目，不能正室也。",
                    "小象曰：惕出無咎，內不自失也。",
                    "小象曰：有孚惠心，勿問之信也。",
                    "小象曰：既雨既處，德積載也。君子征凶，有所疑也。"
                ]
            },
            "履": {
                "guaCi": "履，虎尾，不咥人，亨。",
                "xiangZhuan": "上天下澤，履；君子以辨上下，安民志。",
                "tuanZhuan": "履，剛柔分，動而以中正。履虎尾，不咥人，亨。武毅以中正也，為之于王公，有踐之吉也。",
                "yaoCi": [
                    "初九：素履，往無咎。",
                    "九二：履道坦坦，幽人貞吉。",
                    "六三：眇能視，跛能履，履虎尾，咥人，凶。武人為于大君。",
                    "九四：履虎尾，愬愬終吉。",
                    "九五：夬履，貞厲。",
                    "上九：視履考祥，其旋元吉。"
                ],
                "yaoXiang": [
                    "小象曰：素履之往，獨行正也。",
                    "小象曰：幽人貞吉，中不自亂也。",
                    "小象曰：眇能視，不足以有明也。跛能履，不足以與行也。武人為于大君，志剛進也。",
                    "小象曰：愬愬終吉，志行也。",
                    "小象曰：夬履貞厲，位正當也。",
                    "小象曰：元吉在上，大有慶也。"
                ]
            },
            "泰": {
                "guaCi": "泰，小往大來，吉亨。",
                "xiangZhuan": "天地交，泰；君子以剛柔相易，天道酬勤。",
                "tuanZhuan": "泰，小往大來，乃亨，則天地交，而萬物通也。上下相交，內外相應，柔得位乎外而下應乎剛，則中而外大亨以成。內不失正而外不失其位，剛柔交而安，天地之大亨也。天地交，萬物通也，乃亨。",
                "yaoCi": [
                    "初九：拔茅茹，以其匯，貞吉，亨。",
                    "九二：包荒，用馮河，不遐遺，朋亡，得尚於中行。",
                    "九三：無平不陂，無往不復，艱貞無咎，勿恤其孚，於食有福。",
                    "六四：翩翩不富，以其鄰，不戒以孚。",
                    "六五：帝乙歸妹，以祉元吉。",
                    "上六：城複於隍，勿用師。自邑告命，貞吝。"
                ],
                "yaoXiang": [
                    "小象曰：拔茅茹，志在拔也。",
                    "小象曰：包荒，得尚於中行，以光大也。",
                    "小象曰：無往不復，天地際也。",
                    "小象曰：翩翩不富，皆失實也。不戒以孚，中心情也。",
                    "小象曰：以祉元吉，中以行願也。",
                    "小象曰：城複於隍，其命亂也。"
                ]
            },
            "否": {
                "guaCi": "否，否之匪人，不利君子貞，大往小來。",
                "xiangZhuan": "天地不交，否；君子以儉德避難。",
                "tuanZhuan": "否之匪人，不利君子貞，大往小來，乃否也。天地不交，而萬物不通也。上下不交，而天下無邦也。",
                "yaoCi": [
                    "初六：拔茅茹，以其匯，貞吉，亨。",
                    "六二：包承，小人吉，大人否。",
                    "六三：包羞。",
                    "九四：有命，無咎，疇離祉。",
                    "九五：休否，大人吉，其亡其亡，系于苞桑。",
                    "上九：傾否，先否後喜。"
                ],
                "yaoXiang": [
                    "小象曰：拔茅茹，志在君子也。",
                    "小象曰：包承小人，失道也。",
                    "小象曰：包羞，位不當也。",
                    "小象曰：有命無咎，志行也。",
                    "小象曰：休否之大人，賢以遠害也。",
                    "小象曰：否終則傾，其道大也。"
                ]
            },
            "同人": {
                "guaCi": "同人，於野，亨。利涉大川，利君子貞。",
                "xiangZhuan": "天與火，同人；君子以類族辨物。",
                "tuanZhuan": "同人，柔得中而應乎乾，曰同人。同人於野，亨，剛得位而應。君子以類族辨物。",
                "yaoCi": [
                    "初九：同人於門，無咎。",
                    "六二：同人于宗，吝。",
                    "九三：伏戎於莽，升其高陵，三歲不興。",
                    "九四：乘騏，載顛，攸不利，所往吝。",
                    "九五：同人，先號咷而後笑，大師克相遇。",
                    "上九：同人於郊，無悔。"
                ],
                "yaoXiang": [
                    "小象曰：出門同人，又誰咎也。",
                    "小象曰：同人于宗，吝道也。",
                    "小象曰：伏戎於莽，敵剛也。三歲不興，安行也。",
                    "小象曰：乘騏載顛，志未得也。所往吝，心未滿也。",
                    "小象曰：同人先號咷而後笑，大師相遇，合志也。",
                    "小象曰：同人於郊，志未得也。"
                ]
            },
            "大有": {
                "guaCi": "大有，元亨。",
                "xiangZhuan": "火在天上，大有；君子以遏惡揚善，順天休命。",
                "tuanZhuan": "大有，剛中而應，位居上而大。其德大而能容。天地之大德曰生。",
                "yaoCi": [
                    "初九：無交害，匪咎，艱則無咎。",
                    "九二：大車以載，有攸往，無咎。",
                    "九三：公用亨于天子，小人弗克。",
                    "九四：匪其彭，無咎。",
                    "六五：厥孚交如，威如，吉。",
                    "上九：自天佑之，吉無不利。"
                ],
                "yaoXiang": [
                    "小象曰：艱則無咎，悔亡也。",
                    "小象曰：大車以載，正位也。",
                    "小象曰：公用享于天子，小人害也。",
                    "小象曰：匪其彭，無咎，明辨咎也。",
                    "小象曰：厥孚交如，信以發志也。",
                    "小象曰：自天佑之，吉無不利也。"
                ]
            },
            "謙": {
                "guaCi": "謙，亨，君子有終。",
                "xiangZhuan": "地中有山，謙；君子以裒多益寡，稱物平施。",
                "tuanZhuan": "謙，亨，天道下濟而光明，地道卑而上行，天地謙而能成萬物。君子有終，有始有終。",
                "yaoCi": [
                    "初六：謙謙君子，用涉大川，吉。",
                    "六二：鳴謙，貞吉。",
                    "九三：勞謙，君子有終，吉。",
                    "六四：無不利，撝謙。",
                    "六五：不富以其鄰，利用威儀，吉。",
                    "上六：鳴謙，利用行師征邑國。"
                ],
                "yaoXiang": [
                    "小象曰：謙謙君子，卑以自牧也。",
                    "小象曰：鳴謙，貞吉，中心得之也。",
                    "小象曰：勞謙，君子吉，繼朝也。",
                    "小象曰：無不利，撝謙，不存乎位也。",
                    "小象曰：利用威儀，德以鄰也。",
                    "小象曰：鳴謙，志未得也。可用行師征邑國也。"
                ]
            },
            "豫": {
                "guaCi": "豫，利建侯，行師。",
                "xiangZhuan": "雷出地奮，豫；先王以作樂崇德，殷薦之上帝。",
                "tuanZhuan": "豫，順以動，剛中而應，君子以建侯行師。",
                "yaoCi": [
                    "初六：鳴豫，凶。",
                    "六二：介於石，不終日，貞吉。",
                    "六三：盱豫，悔。遲有悔。",
                    "九四：由豫，大有得。勿疑，朋盍簪。",
                    "六五：冥豫，成，有渝，無咎。",
                    "上六：冥豫，招搖，致寇，凶。"
                ],
                "yaoXiang": [
                    "小象曰：初六鳴豫，志窮凶也。",
                    "小象曰：不終日貞吉，以中正也。",
                    "小象曰：盱豫有悔，何可長也。",
                    "小象曰：由豫大有得，志大行也。",
                    "小象曰：冥豫在上，何可長也。",
                    "小象曰：冥豫在上，何可長也。"
                ]
            },
            "隨": {
                "guaCi": "隨，元亨，利貞，無咎。",
                "xiangZhuan": "澤中有雷，隨；君子以向晦入宴息。",
                "tuanZhuan": "隨，剛來而下柔，曰隨。剛得中而應。元亨，利貞，無咎，順以從剛也。有孚，顒若，信以發志也。天地隨而利貞，斯其道以順也。隨時之義，大矣哉！",
                "yaoCi": [
                    "初九：官有渝，貞吉；出門交有功。",
                    "六二：系小子，失丈夫。",
                    "六三：系丈夫，失小子；隨有求得，利居貞。",
                    "九四：隨有獲，貞凶；有孚在道，以明，何咎？",
                    "九五：孚于嘉，吉。",
                    "上六：拘係之，乃従維之，王用亨於西山。"
                ],
                "yaoXiang": [
                    "小象曰：官有渝，從貴也。",
                    "小象曰：系小子，弗兼與也。",
                    "小象曰：系丈夫，志未得也；隨有求得，當位也。",
                    "小象曰：隨有獲，其義凶也；有孚在道，明功也。",
                    "小象曰：孚於嘉，吉，位正中也。",
                    "小象曰：拘係之，上窮也。"
                ]
            },
            "蠱": {
                "guaCi": "蠱，元亨，利涉大川，先甲三日，後甲三日。",
                "xiangZhuan": "山下有風，蠱；君子以振民育德。",
                "tuanZhuan": "蠱，剛上而柔下，巽而止，蠱；蠱元亨而利涉大川，順以行，止以待也。蠱，先甲三日，後甲三日，終始也。",
                "yaoCi": [
                    "初六：幹父之蠱，有子考，無咎；厲終吉。",
                    "九二：幹母之蠱，不可貞。",
                    "九三：幹父之蠱，小有晦，無大咎。",
                    "六四：裕父之蠱，往見吝。",
                    "六五：幹父之蠱，用譽。",
                    "上九：不事王侯，高尚其事。"
                ],
                "yaoXiang": [
                    "小象曰：幹父之蠱，意承以行也。",
                    "小象曰：幹母之蠱，得中以行也。",
                    "小象曰：幹父之蠱，終無咎也。",
                    "小象曰：裕父之蠱，往未得也。",
                    "小象曰：幹父之蠱，承以德也。",
                    "小象曰：不事王侯，志可則也。"
                ]
            },
            "臨": {
                "guaCi": "臨，元亨，利貞，至於八月有凶。",
                "xiangZhuan": "澤上有地，臨；君子以教思無窮，容保民無疆。",
                "tuanZhuan": "臨，剛浸而長說，臨。臨元亨，利貞，至於八月有凶；君子正而長，否則不遇也。",
                "yaoCi": [
                    "初九：咸臨，貞吉。",
                    "九二：咸臨，吉，無不利。",
                    "六三：甘臨，無攸利。",
                    "六四：至臨，無咎。",
                    "六五：知臨，大君之宜，吉。",
                    "上六：敦臨，吉，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：咸臨貞吉，志行正也。",
                    "小象曰：咸臨吉，無不利也。",
                    "小象曰：甘臨，位不當也。",
                    "小象曰：至臨之道，莫大乎順也。",
                    "小象曰：大君之宜，行中之謂也。",
                    "小象曰：敦臨之吉，志在中也。"
                ]
            },
            "觀": {
                "guaCi": "觀，盥而不薦，有孚顒若。",
                "xiangZhuan": "風行地上，觀；先王以省方觀民設教。",
                "tuanZhuan": "觀，大觀在上，順而巽，中正以觀天下。觀盥而不薦，有孚顒若，下觀而化也。觀之化者，上下觀也。",
                "yaoCi": [
                    "初六：童觀，小人無咎，君子吝。",
                    "六二：窺觀，利女貞。",
                    "六三：觀我生，進退。",
                    "六四：觀國之光，利用賓于王。",
                    "九五：觀我生，君子無咎。",
                    "上九：觀其生，君子無咎。"
                ],
                "yaoXiang": [
                    "小象曰：童觀之吝，所泥也。",
                    "小象曰：窺觀女貞，亦可醜也。",
                    "小象曰：觀我生，進退志也。",
                    "小象曰：觀國之光，尚賓也。",
                    "小象曰：觀我生，觀民也。",
                    "小象曰：觀其生，志未平也。"
                ]
            },
            "噬嗑": {
                "guaCi": "噬嗑，亨。利用獄。",
                "xiangZhuan": "雷電噬嗑；先王以明罰敕法。",
                "tuanZhuan": "噬嗑，剛柔得中而應，利以獄事也。",
                "yaoCi": [
                    "初九：屨校滅趾，無咎。",
                    "六二：噬膚，滅鼻，無咎。",
                    "六三：噬臘肉，遇毒，小吝，無咎。",
                    "九四：噬乾胏，得金矢，利艱貞，吉。",
                    "六五：噬乾肉，得黃金貞，厲，無咎。",
                    "上九：何校滅耳，凶。"
                ],
                "yaoXiang": [
                    "小象曰：屨校滅趾，夷正也。",
                    "小象曰：噬膚滅鼻，乘剛也。",
                    "小象曰：遇毒，位不當也。",
                    "小象曰：得金矢，志未得也。利艱貞，吉，未光也。",
                    "小象曰：噬乾肉，受而不親也。",
                    "小象曰：何校滅耳，聰不明也。"
                ]
            },
            "賁": {
                "guaCi": "賁，亨。小利有攸往。",
                "xiangZhuan": "山下有火，賁；君子以辨色立志。",
                "tuanZhuan": "賁，剛柔皆應，感而亨。分而有明。柔得中而應乎剛，是以亨也。",
                "yaoCi": [
                    "初九：賁其趾，舍車而徒。",
                    "六二：賁其須。",
                    "九三：賁如濡如，永貞吉。",
                    "六四：賁如皤如，白馬翰如，匪寇婚媾。",
                    "六五：賁於丘園，束帛戔戔，吝，終吉。",
                    "上九：白賁，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：舍車而徒，志在下也。",
                    "小象曰：賁其須，與上興也。",
                    "小象曰：賁如濡如，得中也。永貞吉，終始也。",
                    "小象曰：賁如皤如，尚往也。",
                    "小象曰：賁丘園，志未得也。",
                    "小象曰：白賁無咎，上得志也。"
                ]
            },
            "剝": {
                "guaCi": "剝，不利有攸往。",
                "xiangZhuan": "山附於地，剝；上以厚下安宅。",
                "tuanZhuan": "剝，剝也。柔變剛也。不利有攸往，小人長也。",
                "yaoCi": [
                    "初六：剝床以足，蔑貞，凶。",
                    "六二：剝床以辨，蔑貞，凶。",
                    "六三：剝之，無咎。",
                    "六四：剝床以膏，蔑貞，凶。",
                    "六五：剝其彭，居貞吉。",
                    "上九：碩果不食，君子得輿，小人剝廬。"
                ],
                "yaoXiang": [
                    "小象曰：剝床以足，失下也。",
                    "小象曰：剝床以辨，未有與也。",
                    "小象曰：剝之，無咎，失上下也。",
                    "小象曰：剝床以膏，貧窮也。",
                    "小象曰：剝其彭，柔得位也。",
                    "小象曰：君子得輿，民所載也。小人剝廬，失民也。"
                ]
            },
            "復": {
                "guaCi": "復，亨。出入無疾，朋來無咎。反復其道，七日來復，利有攸往。",
                "xiangZhuan": "雷在地中，復；先王以至日閉關，商旅不行，後不省方。",
                "tuanZhuan": "復，亨，剛反，動而以順，亨；出入無疾，朋來無咎，反復其道，七日來復，天行也；利有攸往，剛長也。",
                "yaoCi": [
                    "初九：不遠復，無祇悔，元吉。",
                    "六二：休復，吉。",
                    "六三：頻復，厲無咎。",
                    "六四：中行獨復。",
                    "六五：敦復，無悔。",
                    "上六：迷復，凶，有災眚。"
                ],
                "yaoXiang": [
                    "小象曰：不遠之復，以修身也。",
                    "小象曰：休復之吉，以下仁也。",
                    "小象曰：頻復之厲，義不習也。",
                    "小象曰：中行獨復，以中和也。",
                    "小象曰：敦復無悔，中以自考也。",
                    "小象曰：迷復之凶，反君道也。"
                ]
            },
            "無妄": {
                "guaCi": "無妄，元亨，利貞。其匪正有眚，不利有攸往。",
                "xiangZhuan": "天下雷行，物與無妄；先王以茂對時育萬物。",
                "tuanZhuan": "無妄，剛自外來而為主於內。動而兼正，無妄。其匪正有眚，不利有攸往。無妄之往，何之矣？天命不祐，行矣哉？",
                "yaoCi": [
                    "初九：無妄，往吉。",
                    "六二：不耕獲，不菑佘，則利有攸往。",
                    "六三：無妄之災，或繫之牛，行人之得，邑人之災。",
                    "九四：可貞，無咎。",
                    "九五：無妄之疾，勿藥有喜。",
                    "上九：無妄，行有眚，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：無妄之往，剛得志也。",
                    "小象曰：不耕獲，未富也。",
                    "小象曰：行人得牛，邑人災也。",
                    "小象曰：可貞無咎，固有之也。",
                    "小象曰：無妄之藥，不可試也。",
                    "小象曰：無妄之行，窮之災也。"
                ]
            },
            "大畜": {
                "guaCi": "大畜，利貞。勿害，勿涉大川。",
                "xiangZhuan": "天在山上，大畜；君子以多識前言往行，以續其德。",
                "tuanZhuan": "大畜，剛健，篤實，輝光，日新其德。剛上而尚賢。能止健，大正也。不家食吉，養賢也。",
                "yaoCi": [
                    "初九：有厲，利已。",
                    "九二：輿說輹。",
                    "九三：良馬逐，利艱貞。曰閑輿衛，利有攸往。",
                    "六四：童牛之牿，元吉。",
                    "六五：豶豕之牙，吉。",
                    "上九：何天之衢，亨。"
                ],
                "yaoXiang": [
                    "小象曰：有厲利已，悔亡也。",
                    "小象曰：輿說輹，中無尤也。",
                    "小象曰：利有攸往，上合志也。",
                    "小象曰：六四元吉，有喜也。",
                    "小象曰：六五之吉，有慶也。",
                    "小象曰：何天之衢，道大行也。"
                ]
            },
            "頤": {
                "guaCi": "頤，貞吉。觀頤，自求口實。",
                "xiangZhuan": "山下有雷，頤；君子以慎言語，節飲食。",
                "tuanZhuan": "頤，養正也。剛柔分，得中而應乎乾，是以貞吉也。觀頤，觀其所養也。自求口實，不待人而得，自利也。",
                "yaoCi": [
                    "初九：舍爾食，求我食，攸往，得吉。",
                    "六二：顛頤，拂經，於丘園，征凶。",
                    "六三：拂頤，貞凶，十年勿用，無攸利。",
                    "六四：顛頤吉。虎視眈眈，其欲逐逐，無咎。",
                    "六五：拂經，居貞吉，不可涉大川。",
                    "上九：由頤厲，吉，利涉大川。"
                ],
                "yaoXiang": [
                    "小象曰：求我食，從欲也。",
                    "小象曰：六二征凶，行失類也。",
                    "小象曰：十年勿用，道大悖也。",
                    "小象曰：顛頤之吉，上施光也。",
                    "小象曰：居貞之吉，順以從上也。",
                    "小象曰：由頤厲吉，大有慶也。"
                ]
            },
            "大過": {
                "guaCi": "大過，棟橈，利有攸往，亨。",
                "xiangZhuan": "澤滅木，大過；君子以獨立不懼，遯世無悶。",
                "tuanZhuan": "大過，大者過也。柔邊而剛中，乾行，坤順，剛柔得中，曰大過。棟橈之下，威而不懼，亨而有貞，過之所生也。",
                "yaoCi": [
                    "初六：藉用白茅，無咎。",
                    "九二：枯楊生稊，老婦得其嗣，無咎。",
                    "九三：棟橈，無咎。",
                    "九四：棟隆，吉，有它，吝。",
                    "九五：枯楊生華，老婦得其夫，無咎無譽。",
                    "上六：過涉滅頂，凶，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：藉用白茅，柔在下也。",
                    "小象曰：老婦得其嗣，德行也。",
                    "小象曰：棟橈之咎，不可為也。",
                    "小象曰：棟隆之吉，不可亂也。",
                    "小象曰：老婦得其夫，志無失也。",
                    "小象曰：過涉之凶，不可咎也。"
                ]
            },
            "坎": {
                "guaCi": "坎，習坎，有孚，維心亨，行有尚。",
                "xiangZhuan": "水洊至，坎；君子以常德行，習教事。",
                "tuanZhuan": "坎，險也。險在外，習於內，而不失其和。習坎有孚，維心亨，行有尚。",
                "yaoCi": [
                    "初六：習坎，入於坎，窞，凶。",
                    "九二：坎有險，求小得。",
                    "六三：來之坎，坎，險且枕，入於坎，窞，凶。",
                    "六四：樽酒簋貳，用缶，納約自阨，終無咎。",
                    "九五：坎不盈，祇既平，無咎。",
                    "上六：系用徽纆，窴于叢棘，三歲不得，凶。"
                ],
                "yaoXiang": [
                    "小象曰：習坎入坎，失道凶也。",
                    "小象曰：求小得，未出中也。",
                    "小象曰：來之坎，終有凶也。",
                    "小象曰：樽酒簋貳，剛柔際也。",
                    "小象曰：坎不盈，中未大也。",
                    "小象曰：系用徽纆，命以險也。"
                ]
            },
            "離": {
                "guaCi": "離，利貞，亨。畜牝牛，吉。",
                "xiangZhuan": "明兩作，離；大人以繼明照于四方。",
                "tuanZhuan": "離，麗也。日月麗乎天，百穀草木麗乎土。麗，明也。柔麗乎剛，中正而應，君子以自疾也。",
                "yaoCi": [
                    "初九：履錯然，敬之無咎。",
                    "六二：黃離，元吉。",
                    "九三：日昃之離，不自明，古曆於邅，凶。",
                    "九四：突如其來如，焚如，死如，棄如。",
                    "六五：出涕沱若，戚然，終吉。",
                    "上六：王用出征，有嘉，折首，獲其匪人，吉。"
                ],
                "yaoXiang": [
                    "小象曰：履錯之敬，以辯禍也。",
                    "小象曰：黃離元吉，得中道也。",
                    "小象曰：日昃之離，何可久也。",
                    "小象曰：焚如死如，怨及其身也。",
                    "小象曰：六五終吉，以中道也。",
                    "小象曰：王用出征，以正邦也。"
                ]
            },
            "鹹": {
                "guaCi": "鹹，亨。利貞。取女吉。",
                "xiangZhuan": "山上有澤，鹹；君子以虛受人。",
                "tuanZhuan": "鹹，感也，柔上而剛下，二氣感應以相與。天地感而萬物化生，聖人感人心而天下和平，鹹之亨，感之通也。男女正，天地之大義也。取女吉，天地之終始也。",
                "yaoCi": [
                    "初六：鹹其拇。",
                    "六二：咸其腓，兇，居吉。",
                    "九三：鹹其股，執其隨，往吝。",
                    "九四：貞吉，悔亡。憧憧往來，朋從爾思。",
                    "九五：鹹其脢，無悔。",
                    "上六：鹹其輔頰舌。"
                ],
                "yaoXiang": [
                    "小象曰：鹹其拇，志在外也。",
                    "小象曰：雖兇居吉，順不害也。",
                    "小象曰：鹹其股，亦不中也。志不失其隨，吝以行也。",
                    "小象曰：憧憧往來，未光也。",
                    "小象曰：鹹其脢，志末也。",
                    "小象曰：鹹其輔頰舌，何以行也。"
                ]
            },
            "恒": {
                "guaCi": "恒，亨，無咎，利貞。利有攸往。",
                "xiangZhuan": "雷風，恒；君子以立不易方。",
                "tuanZhuan": "恒，剛上而柔下，雷風相與，巽而動，恒。恒亨，久也。利貞，無咎，利有攸往，恒其德也。",
                "yaoCi": [
                    "初六：浚恒，貞凶，無攸利。",
                    "九二：悔亡。",
                    "九三：不恆其德，或承之羞，貞吝。",
                    "九四：田無禽。",
                    "六五：恆其德，貞婦人吉，夫子凶。",
                    "上六：振恒，兇。"
                ],
                "yaoXiang": [
                    "小象曰：浚恒之凶，始求深也。",
                    "小象曰：九二悔亡，能久中也。",
                    "小象曰：不恆其德，無所容也。",
                    "小象曰：久恒之，難也。",
                    "小象曰：婦人貞吉，從一而終也；夫子凶，變常也。",
                    "小象曰：振恒之兇，終無慶也。"
                ]
            },
            "遯": {
                "guaCi": "遯，亨，小利貞。",
                "xiangZhuan": "天下有山，遯；君子以遠小人，不惡而嚴。",
                "tuanZhuan": "遯，亨，小利貞，遯以小利貞，順而止也。剛當位而應乎乾，遯以亨，順以正也。",
                "yaoCi": [
                    "初六：遯尾，厲，勿用有攸往。",
                    "六二：執之用黃牛之革，莫之勝說。",
                    "九三：係遯，有疾，厲，畜臣妾，吉。",
                    "九四：好遯，君子吉，小人否。",
                    "九五：嘉遯，貞吉。",
                    "上九：肥遯，無不利。"
                ],
                "yaoXiang": [
                    "小象曰：遯尾之厲，不往何災也。",
                    "小象曰：執用黃牛之革，固志也。",
                    "小象曰：係遯之厲，有疾惡也。",
                    "小象曰：君子好遯，小人否也。",
                    "小象曰：嘉遯貞吉，以中正也。",
                    "小象曰：肥遯無不利，無所疑也。"
                ]
            },
            "大壯": {
                "guaCi": "大壯，利貞。",
                "xiangZhuan": "雷在天上，大壯；君子以非禮勿履。",
                "tuanZhuan": "大壯，剛自外來而為主於內。大壯，利貞，以剛中也。",
                "yaoCi": [
                    "初九：壯於趾，征凶，有孚。",
                    "九二：貞吉。",
                    "九三：小人用壯，君子用罔，貞厲，羸豕之臆，凶。",
                    "九四：貞吉，悔亡，藩決不羸，壯於大輿之輹。",
                    "六五：喪羊於易，無悔。",
                    "上六：大人虎變，未佔有孚。"
                ],
                "yaoXiang": [
                    "小象曰：壯於趾，其孚窮也。",
                    "小象曰：九二貞吉，以中也。",
                    "小象曰：小人用壯，君子用罔也。",
                    "小象曰：藩決不羸，志大行也。",
                    "小象曰：喪羊於易，位不容也。",
                    "小象曰：大人虎變，其文蔚也。"
                ]
            },
            "晉": {
                "guaCi": "晉，康侯用錫馬蕃庶，晝日三接。",
                "xiangZhuan": "明出地上，晉；君子以自昭明德。",
                "tuanZhuan": "晉，進也，明出地上，順而麗乎剛，中而應乎明。進以貞吉，進以誠也。康侯用錫馬，衆庶之中；晝日三接，遇剛也。",
                "yaoCi": [
                    "初六：晉如摧如，貞吉，遇危，無咎。",
                    "六二：晉如愁如，貞吉，受茲介福，於皇之夫。",
                    "六三：眾允，悔亡。",
                    "九四：晉如鼫鼠，貞厲。",
                    "六五：悔亡，失得勿恤。",
                    "上九：晉其角，維用伐邑，厲吉，無咎，貞吝。"
                ],
                "yaoXiang": [
                    "小象曰：晉如摧如，獨行則也。",
                    "小象曰：受介福，所以行也。",
                    "小象曰：眾允之志，上行也。",
                    "小象曰：鼫鼠貞厲，位不當也。",
                    "小象曰：失得勿恤，往有慶也。",
                    "小象曰：維用伐邑，道未光也。"
                ]
            },
            "明夷": {
                "guaCi": "明夷，利艱貞。",
                "xiangZhuan": "明入地中，明夷；君子以蒞眾用晦而明。",
                "tuanZhuan": "明夷，內文明而外柔順也。以文明而行艱貞之道，莫之能害也。",
                "yaoCi": [
                    "初九：明夷於飛，垂其翼，君子于行，三日不食，有攸往，主人有言。",
                    "六二：明夷，夷于左股，用拯馬壯，吉。",
                    "九三：明夷于南狩，得其大首，不可疾貞。",
                    "六四：入于左腹，獲明夷之心，於出門庭。",
                    "六五：箕子之明夷，利貞。",
                    "上六：不明，晦，初登於天，後入於地。"
                ],
                "yaoXiang": [
                    "小象曰：君子于行，夷，志未光也。",
                    "小象曰：六二之吉，順以則也。",
                    "小象曰：南狩之志，乃大得也。",
                    "小象曰：入于左腹，獲心意也。",
                    "小象曰：箕子之貞，明不可息也。",
                    "小象曰：初登於天，照四鄰也。後入於地，失則也。"
                ]
            },
            "家人": {
                "guaCi": "家人，利女貞。",
                "xiangZhuan": "風自火出，家人；君子以言有物而行有恆。",
                "tuanZhuan": "家人，女正位乎內，男正位乎外，陰陽正，則家人吉。利女貞，婦順夫也。",
                "yaoCi": [
                    "初九：賢家，吉。",
                    "六二：無咎。",
                    "九三：家人嗃嗃，悔厲吉，婦子嘻嘻，終吝。",
                    "六四：富家，大吉。",
                    "九五：王假有家，勿恤，吉。",
                    "上九：有孚，威如，終吉。"
                ],
                "yaoXiang": [
                    "小象曰：賢家之吉，順以巽也。",
                    "小象曰：六二之吉，順以巽也。",
                    "小象曰：家人嗃嗃，失喜也；婦子嘻嘻，終吝也。",
                    "小象曰：富家大吉，順以巽也。",
                    "小象曰：王假有家，交相愛也。",
                    "小象曰：威如之終，咎不長也。"
                ]
            },
            "睽": {
                "guaCi": "睽，亨。小事吉。",
                "xiangZhuan": "上火下澤，睽；君子以同而異。",
                "tuanZhuan": "睽，方以類，物以群，兇吉異道。內外不相應也。",
                "yaoCi": [
                    "初九：悔亡，喪馬勿逐，自復。見惡人，無咎。",
                    "九二：遇主於巷，無咎。",
                    "六三：見輿曳，其牛掣，其人天且劓，無初有終。",
                    "九四：睽孤，遇元夫，交孚，厲無咎。",
                    "六五：悔亡，厥宗噬膚，往何咎。",
                    "上九：睽其角，吝，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：見惡人，以遠咎也。",
                    "小象曰：遇主於巷，未失道也。",
                    "小象曰：見輿曳，位不當也。",
                    "小象曰：睽孤遇元夫，所交孚也。",
                    "小象曰：厥宗噬膚，往有慶也。",
                    "小象曰：睽其角，終呆也。"
                ]
            },
            "蹇": {
                "guaCi": "蹇，利西南，不利東北，利見大人，貞吉。",
                "xiangZhuan": "山上有水，蹇；君子以反身修德。",
                "tuanZhuan": "蹇，難也，險在前也。見大人，往有功也。",
                "yaoCi": [
                    "初六：往蹇，來譽。",
                    "六二：王跛，蹇，信有功。",
                    "九三：往蹇，來反。",
                    "六四：往蹇，來連。",
                    "九五：大蹇，朋來。",
                    "上六：往蹇，來碩，吉。"
                ],
                "yaoXiang": [
                    "小象曰：往蹇來譽，宜待也。",
                    "小象曰：王跛，蹇，累其相也。",
                    "小象曰：往蹇來反，內愧也。",
                    "小象曰：往蹇來連，當位也。",
                    "小象曰：大蹇朋來，以中直也。",
                    "小象曰：往蹇來碩，志在外也。"
                ]
            },
            "解": {
                "guaCi": "解，利西南，無咎。",
                "xiangZhuan": "雷雨作，解；君子以赦過宥罪。",
                "tuanZhuan": "解，險以順，動而說，解。解利西南，往得眾也。無咎，順以使志也。",
                "yaoCi": [
                    "初六：無咎。",
                    "九二：田獲三狐，得黃矢，貞吉。",
                    "六三：負且乘，致寇至，貞吝。",
                    "九四：解而拇，朋友讎，則疏。",
                    "六五：君子維有解，吉，有孚於小人。",
                    "上六：公用射隼於高墉之上，獲之，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：初六無咎，順以動也。",
                    "小象曰：九二貞吉，得中道也。",
                    "小象曰：負且乘，志趣也。",
                    "小象曰：解而拇，志在外也。",
                    "小象曰：君子有解，善以寬也。",
                    "小象曰：射隼於高墉之上，獲之，無咎也。"
                ]
            },
            "損": {
                "guaCi": "損，有孚，元吉，無咎，可貞，利有攸往。曷之用？二簋可用享。",
                "xiangZhuan": "山下有澤，損；君子以懲忿窒欲。",
                "tuanZhuan": "損，損下益上，其道大矣哉。雖損，益以忠信，損益盈虛，與時偕行。二簋可用享，得神也。",
                "yaoCi": [
                    "初九：已損其父之贊，用之於王公，吝，吉。",
                    "九二：利貞，征凶，弗損益之。",
                    "六三：三人行則損一人。一人行則得其友。",
                    "六四：損其疾，使遄有喜，無咎。",
                    "六五：或益之十朋之龜，弗克違，元吉。",
                    "上九：弗損益之，無咎，貞吉。利有攸往，得臣無家。"
                ],
                "yaoXiang": [
                    "小象曰：已損其贊，吉，萬民和也。",
                    "小象曰：九二利貞，損益之吉也。",
                    "小象曰：一人行損三人，以損益之也。",
                    "小象曰：損其疾，亦可喜也。",
                    "小象曰：益之十朋之龜，志以決也。",
                    "小象曰：弗損益之，大得志也。"
                ]
            },
            "益": {
                "guaCi": "益，利有攸往，利涉大川。",
                "xiangZhuan": "風雷，益；君子以見善則遷，有過則改。",
                "tuanZhuan": "益，損益盈虛，與時偕行，則利有攸往，利涉大川也。",
                "yaoCi": [
                    "初九：利用為大作，元吉，無咎。",
                    "六二：或益之十朋之龜，弗克違，永貞吉。",
                    "六三：益之用凶事，無咎。有孚中行，告公用圭。",
                    "六四：中行，告公從，利用為依遷國。",
                    "九五：有孚惠心，勿問元吉。有孚惠我德。",
                    "上九：莫益之，或擊之，立心勿恆，兇。"
                ],
                "yaoXiang": [
                    "小象曰：利用為大作，名未成也。",
                    "小象曰：或益之，剛中也。",
                    "小象曰：益用凶事，固有之也。",
                    "小象曰：告公從，以益志也。",
                    "小象曰：有孚惠心，勿問之信也。",
                    "小象曰：莫益之，偏無咎也。"
                ]
            },
            "夬": {
                "guaCi": "夬，揚於王庭。孚號有厲。告自邑。不利即戎。利有攸往。",
                "xiangZhuan": "澤上於天，夬；君子以施禮斷數。",
                "tuanZhuan": "夬，剛決柔也，決而有孚，固有厲也。告自邑，不利即戎，當位以行道也。利有攸往，剛長也。",
                "yaoCi": [
                    "初九：壯於前趾，往不勝為咎。",
                    "九二：惕號，若，逐，隨，正吉，無咎。",
                    "九三：壯於頄，有凶。",
                    "九四：臀無膚，其行次且。牽羊悔亡，聞言不信。",
                    "九五：莧陸夬夬，中行無咎。",
                    "上六：無號，終有凶。"
                ],
                "yaoXiang": [
                    "小象曰：不勝而往，咎也。",
                    "小象曰：九二正吉，行惕也。",
                    "小象曰：壯於頄，剛決柔也。",
                    "小象曰：其行次且，位不當也。",
                    "小象曰：中行無咎，未失道也。",
                    "小象曰：無號之凶，終不可長也。"
                ]
            },
            "姤": {
                "guaCi": "姤，女壯，勿用取女。",
                "xiangZhuan": "天下有風，姤；君子以號令作事。",
                "tuanZhuan": "姤，遇也。剛遇而遇。勿用取女，柔情不正也。",
                "yaoCi": [
                    "初六：繫於金柅，匪寇婚媾，往吉。無咎。",
                    "九二：包有魚，直弗疑，往吉。",
                    "九三：臀無膚，其行次且，厲，無咎。",
                    "九四：包無魚，起凶。",
                    "九五：以杞包瓜，含章，有陸吉，無咎。",
                    "上九：姤其角，吝，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：繫於金柅，柔道也。",
                    "小象曰：包有魚，義不及也。",
                    "小象曰：其行次且，進退失據也。",
                    "小象曰：包無魚，位不當也。",
                    "小象曰：以杞包瓜，義包也。",
                    "小象曰：姤其角，上窮鬥也。"
                ]
            },
            "萃": {
                "guaCi": "萃，亨。王假有廟。利見大人。亨利有攸往。",
                "xiangZhuan": "澤上於地，萃；君子以除戎息亂。",
                "tuanZhuan": "萃，聚也，順以聚也。剛中而應，為王事也。王假有廟，感而亨也。利見大人，亨亦進也。利有攸往，聚之所成也。",
                "yaoCi": [
                    "初六：萃於郊，無咎。",
                    "六二：引吉，無咎。",
                    "六三：萃如嗟如，無攸往，呂遄，吉。",
                    "九四：大吉，無咎。",
                    "九五：萃有位，無咎。匪孚，元永貞，悔亡。",
                    "上六：齎諮涕洟，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：萃於郊，位不當也。",
                    "小象曰：引吉無咎，中未變也。",
                    "小象曰：萃如嗟如，位不當也。呂遄，志未得也。",
                    "小象曰：大吉無咎，位不當也。",
                    "小象曰：萃有位，剛中也。",
                    "小象曰：齎諮涕洟，未安上也。"
                ]
            },
            "升": {
                "guaCi": "升，元亨。用見大人，勿恤，南征吉。",
                "xiangZhuan": "地中生木，升；君子以順德，積小以高大。",
                "tuanZhuan": "升，柔以時升，進而不息也。正以升，上行也。用見大人，勿恤，南征吉，志行正也。",
                "yaoCi": [
                    "初六：允升，大吉。",
                    "九二：孚乃利用禴，無咎。",
                    "九三：升虛邑。",
                    "六四：王用亨於岐山，吉，無咎。",
                    "六五：貞吉，升階。",
                    "上六：冥升，利於不息。"
                ],
                "yaoXiang": [
                    "小象曰：允升大吉，柔得中也。",
                    "小象曰：九二利用禴，中以應也。",
                    "小象曰：升虛邑，無所疑也。",
                    "小象曰：王用亨於岐山，順事也。",
                    "小象曰：貞吉升階，大得志也。",
                    "小象曰：冥升在上，循志也。"
                ]
            },
            "困": {
                "guaCi": "困，亨，貞，大人吉，無咎，有言不信。",
                "xiangZhuan": "澤無水，困；君子以致命遂志。",
                "tuanZhuan": "困，剛不遇也，險不援也。乃亨，貞，大人吉，無咎，有言不信也。",
                "yaoCi": [
                    "初六：臀困於株木，入于幽谷，三歲不覿。",
                    "九二：困于酒食，朱紱方來，利用享祀，征凶，無咎。",
                    "六三：困于石，據於蒺藜，入於其宮，不見其妻，凶。",
                    "九四：來徐徐，困于金車，吝，有終。",
                    "九五：劓刖，困於赤紱，乃徐有說，利用祭祀。",
                    "上六：困于葛藟，於陸，亨，入於穴，有不速之客三人至，敬之終吉。"
                ],
                "yaoXiang": [
                    "小象曰：入于幽谷，幽不明也。",
                    "小象曰：困於酒食，中有慶也。",
                    "小象曰：據於蒺藜，乘剛也。入於其宮，不見其妻，不祥也。",
                    "小象曰：來徐徐，志在下也。困于金車，傅也。",
                    "小象曰：劓刖，志未得也。乃徐有說，未有功也。",
                    "小象曰：困于葛藟，位不當也。入於穴，逢不速之客，未失道也。"
                ]
            },
            "井": {
                "guaCi": "井，改邑不改井，無喪無得。往來井井，汔至亦未繘井，羸其瓶，凶。",
                "xiangZhuan": "木上有水，井；君子以勞民勸相。",
                "tuanZhuan": "井，改邑不改井，井養萬物，至易也。",
                "yaoCi": [
                    "初六：井泥不食，舊井無禽。",
                    "九二：井穀射鮒，甕敝漏。",
                    "九三：井渫不食，為我心惻，可用汲，王明並受其福。",
                    "六四：井甃，無咎。",
                    "九五：井冽寒泉，食。",
                    "上六：井收勿幕，有孚元吉。"
                ],
                "yaoXiang": [
                    "小象曰：井泥不食，下不得也。",
                    "小象曰：井穀射鮒，無與也。",
                    "小象曰：井渫不食，行恆也。王明並受其福，修德也。",
                    "小象曰：井甃無咎，修井也。",
                    "小象曰：寒泉之食，中正也。",
                    "小象曰：井收元吉，終也。"
                ]
            },
            "革": {
                "guaCi": "革，己日乃孚，元亨利貞，悔亡。",
                "xiangZhuan": "澤中有火，革；君子以治曆明時。",
                "tuanZhuan": "革，剛中而應，革而亨，順乎天而利。元亨利貞，成功也。天地革而四時成，湯、武革命，順乎天而應乎人，革之時大矣哉！",
                "yaoCi": [
                    "初九：鞏用黃牛之革。",
                    "六二：己日乃革之，征吉，無咎。",
                    "九三：征凶，貞厲，革言三就，有孚。",
                    "九四：悔亡，有孚，改命吉。",
                    "九五：大人虎變，未佔有孚。",
                    "上六：君子豹變，小人革面，征凶，居貞吉。"
                ],
                "yaoXiang": [
                    "小象曰：鞏用黃牛，不失也。",
                    "小象曰：己日革之，行有嘉也。",
                    "小象曰：革言三就，又何之矣。",
                    "小象曰：改命之吉，信志也。",
                    "小象曰：大人虎變，其文蔚也。",
                    "小象曰：君子豹變，其文蔚也；小人革面，順以從君也。"
                ]
            },
            "鼎": {
                "guaCi": "鼎，元吉，亨。",
                "xiangZhuan": "木上有火，鼎；君子以正位凝命。",
                "tuanZhuan": "鼎，象也。以木巽火，亨饌也。鼎元吉，則中正以應，時大也。君子正位凝命，斯其義也。",
                "yaoCi": [
                    "初六：鼎顚趾，利出否，得妾以其子，無咎。",
                    "九二：鼎有實，我仇有疾，不我能即，吉。",
                    "九三：鼎耳革，其行塞，雉膏不食，方雨虧悔，終吉。",
                    "九四：鼎折足，覆公餗，其形渥，凶。",
                    "六五：鼎黃耳金鉉，利貞。",
                    "上九：鼎玉鉉，大吉，無不利。"
                ],
                "yaoXiang": [
                    "小象曰：鼎顚趾，未有咎也。利出否，欲清也。",
                    "小象曰：我仇有疾，不即我，吉，志在外也。",
                    "小象曰：鼎耳革，失其義也。",
                    "小象曰：覆公餗，信如何也。",
                    "小象曰：鼎黃耳，中以為實也。",
                    "小象曰：玉鉉在上，剛柔節也。"
                ]
            },
            "震": {
                "guaCi": "震，亨。震來虩虩，笑言啞啞，震驚百里，不喪匕鬯。",
                "xiangZhuan": "洶洶雷動，震；君子以恐懼修省。",
                "tuanZhuan": "震，繼之也。剛動而柔應，震亨。震來虩虩，恐致福也；笑言啞啞，後有則也。震驚百里，驚遠而懼邇也。不喪匕鬯，中心安也。",
                "yaoCi": [
                    "初九：震來虩虩，後笑言啞啞，吉。",
                    "六二：震來厲，億喪貝，躋于九陵，勿逐，七日得。",
                    "六三：震蘇蘇，震行無眚。",
                    "九四：震遂泥。",
                    "六五：震往來厲，億無喪，有事。",
                    "上六：震索索，視矍矍，征凶。震不于其躬，于其鄰，無咎。婚媾有言。"
                ],
                "yaoXiang": [
                    "小象曰：震來虩虩，恐致福也；笑言啞啞，後有則也。",
                    "小象曰：震來厲，乘剛也。",
                    "小象曰：震蘇蘇，位不當也。",
                    "小象曰：震遂泥，未光也。",
                    "小象曰：震往來厲，危行也。",
                    "小象曰：震不于其躬，未光大也。"
                ]
            },
            "艮": {
                "guaCi": "艮，艮其背，不獲其身，行其庭，不見其人，無咎。",
                "xiangZhuan": "兼山，艮；君子以思不出其位。",
                "tuanZhuan": "艮，止也。時止則止，時行則行，動靜不失其時，其道光明。艮其背，止其所也。行其庭，不見其人，無咎，止於外也。",
                "yaoCi": [
                    "初六：艮其趾，無咎，利永貞。",
                    "六二：艮其腓，不救其隨，其心不快。",
                    "九三：艮其限，列其夤，厲薰心。",
                    "六四：艮其身，無咎。",
                    "六五：艮其輔，言有序，悔亡。",
                    "上九：敦艮，吉。"
                ],
                "yaoXiang": [
                    "小象曰：艮其趾，未失正也。",
                    "小象曰：不救其隨，未退聽也。",
                    "小象曰：艮其限，危薰心也。",
                    "小象曰：艮其身，止諸躬也。",
                    "小象曰：艮其輔，以中正也。",
                    "小象曰：敦艮之吉，以厚終也。"
                ]
            },
            "漸": {
                "guaCi": "漸，女歸吉，利貞。",
                "xiangZhuan": "山上有木，漸；君子以居賢德，善俗。",
                "tuanZhuan": "漸，進也。女歸吉，進得位，往有功也。進以正，可以正邦也。漸之進，順而有常也。",
                "yaoCi": [
                    "初六：鴻漸于干，小子厲，有言，無咎。",
                    "六二：鴻漸于磐，飲食衎衎，吉。",
                    "九三：鴻漸于陸，夫征不復，婦孕不育，凶。利禦寇。",
                    "六四：鴻漸于木，或得其桷，無咎。",
                    "九五：鴻漸于陵，婦三歲不孕，終莫之勝，吉。",
                    "上六：鴻漸于陸，其羽可用為儀，吉。"
                ],
                "yaoXiang": [
                    "小象曰：小子之厲，義無咎也。",
                    "小象曰：飲食衎衎，志在中也。",
                    "小象曰：夫征不復，離群醜也。婦孕不育，失其道也。",
                    "小象曰：或得其桷，順以巽也。",
                    "小象曰：終莫之勝，吉，得志也。",
                    "小象曰：其羽可用為儀，吉，不可亂也。"
                ]
            },
            "歸妹": {
                "guaCi": "歸妹，征凶，無攸利。",
                "xiangZhuan": "澤上有雷，歸妹；君子以永終知敝。",
                "tuanZhuan": "歸妹，天地之大義也。天地不交，則萬物不興。歸妹，女之終也。征凶，位不當也。無攸利，柔乘剛也。",
                "yaoCi": [
                    "初九：歸妹以娣，跛能履，征吉。",
                    "九二：眇能視，利幽人之貞。",
                    "六三：歸妹以須，反歸以娣。",
                    "九四：歸妹愆期，遲歸有時。",
                    "六五：帝乙歸妹，其君之袂不如其娣之袂良，月幾望，吉。",
                    "上六：女承筐無實，士刲羊無血，無攸利。"
                ],
                "yaoXiang": [
                    "小象曰：跛能履，吉，相承也。",
                    "小象曰：利幽人之貞，未變常也。",
                    "小象曰：歸妹以須，未當也。",
                    "小象曰：愆期之志，有待而行也。",
                    "小象曰：帝乙歸妹，不如其娣之袂良也，吉，中以行也。",
                    "小象曰：無實，無血，無攸利也。"
                ]
            },
            "豐": {
                "guaCi": "豐，亨，王假之，勿憂，宜日中。",
                "xiangZhuan": "雷電皆至，豐；君子以折獄致刑。",
                "tuanZhuan": "豐，大也。明動以麗乎剛，是以亨。王假之，尚大也。勿憂宜日中，宜照天下也。",
                "yaoCi": [
                    "初九：遇其配主，雖旬無咎，往有尚。",
                    "六二：豐其蔀，日中見斗，往得疑疾，有孚發若，吉。",
                    "九三：豐其沛，日中見沬，折其右肱，無咎。",
                    "九四：豐其蔀，日中見斗，遇其夷主，吉。",
                    "六五：來章，有慶譽，吉。",
                    "上六：豐其屋，蔀其家，窺其戶，闃其無人，三歲不覿，凶。"
                ],
                "yaoXiang": [
                    "小象曰：雖旬無咎，過旬災也。",
                    "小象曰：有孚發若，信以發志也。",
                    "小象曰：豐其沛，不可大事也。折其右肱，終不可用也。",
                    "小象曰：遇其夷主，吉，行也。",
                    "小象曰：來章有慶，吉，乃位也。",
                    "小象曰：豐其屋，凶，天際也。"
                ]
            },
            "旅": {
                "guaCi": "旅，小亨，旅貞吉。",
                "xiangZhuan": "山上有火，旅；君子以明慎用刑，而不留獄。",
                "tuanZhuan": "旅，剛得中而柔外也。旅小亨，順而止也。旅貞吉，止而順也。",
                "yaoCi": [
                    "初六：旅瑣瑣，斯其所取災。",
                    "六二：旅即次，懷其資，得童僕，貞。",
                    "九三：旅焚其次，喪其童僕，貞厲。",
                    "九四：旅于處，得其資斧，我心不快。",
                    "六五：射雉一矢亡，終以譽命。",
                    "上九：鳥焚其巢，旅人先笑後號咷，喪牛于易，凶。"
                ],
                "yaoXiang": [
                    "小象曰：旅瑣瑣，志窮災也。",
                    "小象曰：得童僕貞，終無尤也。",
                    "小象曰：旅焚其次，亦以傷矣。",
                    "小象曰：旅于處，未得位也。",
                    "小象曰：射雉一矢亡，終以譽命，位得中也。",
                    "小象曰：鳥焚其巢，失天下也。"
                ]
            },
            "巽": {
                "guaCi": "巽，小亨，利有攸往，利見大人。",
                "xiangZhuan": "隨風，巽；君子以申命行事。",
                "tuanZhuan": "巽，重巽以申命，剛巽乎中正而志行。柔皆順乎剛，是以小亨，利有攸往，利見大人。",
                "yaoCi": [
                    "初六：進退，利武人之貞。",
                    "九二：巽在床下，用史巫紛若，吉，無咎。",
                    "九三：頻巽，吝。",
                    "六四：悔亡，田獲三品。",
                    "九五：貞吉，悔亡，無不利。無初有終，先庚三日，後庚三日，吉。",
                    "上九：巽在床下，喪其資斧，貞凶。"
                ],
                "yaoXiang": [
                    "小象曰：進退，志疑也。利武人之貞，志治也。",
                    "小象曰：紛若之吉，得志也。",
                    "小象曰：頻巽之吝，志窮也。",
                    "小象曰：田獲三品，有功也。",
                    "小象曰：九五之吉，位正中也。",
                    "小象曰：巽在床下，上窮也。"
                ]
            },
            "兌": {
                "guaCi": "兌，亨，利貞。",
                "xiangZhuan": "麗澤，兌；君子以朋友講習。",
                "tuanZhuan": "兌，說也。剛中而柔外，說以利貞，是以順乎天而應乎人。兌以說，順乎剛也。",
                "yaoCi": [
                    "初九：和兌，吉。",
                    "九二：孚兌，吉，悔亡。",
                    "六三：來兌，凶。",
                    "九四：商兌，未寧，介疾有喜。",
                    "九五：孚于剝，有厲。",
                    "上六：引兌。"
                ],
                "yaoXiang": [
                    "小象曰：和兌之吉，行未疑也。",
                    "小象曰：孚兌之吉，信志也。",
                    "小象曰：來兌之凶，位不當也。",
                    "小象曰：九四之喜，有慶也。",
                    "小象曰：孚于剝，位正當也。",
                    "小象曰：引兌，上窮也。"
                ]
            },
            "渙": {
                "guaCi": "渙，亨。王假有廟，利涉大川，利貞。",
                "xiangZhuan": "風行水上，渙；先王以享于帝立廟。",
                "tuanZhuan": "渙，散也。剛來而不窮，柔得位乎外而上同。王假有廟，散而聚也。利涉大川，乘木有功也。",
                "yaoCi": [
                    "初六：用拯馬壯，吉。",
                    "九二：渙奔其機，悔亡。",
                    "六三：渙其躬，無悔。",
                    "六四：渙其群，元吉。渙有丘，匪夷所思。",
                    "九五：渙汗其大號，渙王居，無咎。",
                    "上九：渙其血，去逖出，無咎。"
                ],
                "yaoXiang": [
                    "小象曰：初六之吉，順也。",
                    "小象曰：渙奔其機，得願也。",
                    "小象曰：渙其躬，志在外也。",
                    "小象曰：渙其群，元吉，光大也。",
                    "小象曰：王居無咎，正位也。",
                    "小象曰：渙其血，遠害也。"
                ]
            },
            "節": {
                "guaCi": "節，亨。苦節不可貞。",
                "xiangZhuan": "澤上有水，節；君子以制數度，議德行。",
                "tuanZhuan": "節，亨，剛柔分而剛得中。苦節不可貞，其道窮也。說以行險，當位以節，中正以通。",
                "yaoCi": [
                    "初九：不出戶庭，無咎。",
                    "九二：不出門庭，凶。",
                    "六三：不節若，則嗟若，無咎。",
                    "六四：安節，亨。",
                    "九五：甘節，吉，往有尚。",
                    "上六：苦節，貞凶，悔亡。"
                ],
                "yaoXiang": [
                    "小象曰：不出戶庭，知通塞也。",
                    "小象曰：不出門庭，失時極也。",
                    "小象曰：不節之嗟，又誰咎也。",
                    "小象曰：安節之亨，承上道也。",
                    "小象曰：甘節之吉，居位中也。",
                    "小象曰：苦節貞凶，其道窮也。"
                ]
            },
            "中孚": {
                "guaCi": "中孚，豚魚吉，利涉大川，利貞。",
                "xiangZhuan": "澤上有風，中孚；君子以議獄緩刑。",
                "tuanZhuan": "中孚，柔在內而剛得中，說而巽，孚乃化邦也。豚魚吉，信及豚魚也。利涉大川，乘木舟虛也。",
                "yaoCi": [
                    "初九：虞吉，有他不燕。",
                    "九二：鳴鶴在陰，其子和之。我有好爵，吾與爾靡之。",
                    "六三：得敵，或鼓或罷，或泣或歌。",
                    "六四：月幾望，馬匹亡，無咎。",
                    "九五：有孚攣如，無咎。",
                    "上九：翰音登于天，貞凶。"
                ],
                "yaoXiang": [
                    "小象曰：初九虞吉，志未變也。",
                    "小象曰：其子和之，中心願也。",
                    "小象曰：或鼓或罷，位不當也。",
                    "小象曰：馬匹亡，絕類上也。",
                    "小象曰：有孚攣如，位正中也。",
                    "小象曰：翰音登于天，志窮凶也。"
                ]
            },
            "小過": {
                "guaCi": "小過，亨，利貞。可小事，不可大事。飛鳥遺之音，不宜上，宜下，大吉。",
                "xiangZhuan": "山上有雷，小過；君子以行過乎恭，喪過乎哀，用過乎儉。",
                "tuanZhuan": "小過，柔得中，是以亨也。利貞，與時行也。可小事，柔得中也。不可大事，剛失位也。",
                "yaoCi": [
                    "初六：飛鳥以凶。",
                    "六二：過其祖，遇其妣。不及其君，遇其臣，無咎。",
                    "九三：弗過防之，從或戕之，凶。",
                    "九四：無咎，弗過遇之。往厲必戒，勿用永貞。",
                    "六五：密雲不雨，自我西郊，公弋取彼在穴。",
                    "上六：弗遇過之，飛鳥離之，凶，是謂災眚。"
                ],
                "yaoXiang": [
                    "小象曰：飛鳥以凶，不可如何也。",
                    "小象曰：不及其君，臣不可過也。",
                    "小象曰：從或戕之，凶如何也。",
                    "小象曰：弗過遇之，位不當也。",
                    "小象曰：密雲不雨，已在上也。",
                    "小象曰：弗遇過之，凶，志窮也。"
                ]
            },
            "既濟": {
                "guaCi": "既濟，亨小，利貞，初吉終亂。",
                "xiangZhuan": "水在火上，既濟；君子以思患而豫防之。",
                "tuanZhuan": "既濟，亨小，利貞，剛柔正而位當也。初吉，柔得中也。終亂，剛柔失位也。",
                "yaoCi": [
                    "初九：曳其輪，濡其尾，無咎。",
                    "六二：婦喪其茀，勿逐，七日得。",
                    "九三：高宗伐鬼方，三年克之，小人勿用。",
                    "六四：繻有衣袽，終日戒。",
                    "九五：東鄰殺牛，不如西鄰之禴祭，實受其福。",
                    "上六：濡其首，厲。"
                ],
                "yaoXiang": [
                    "小象曰：曳其輪，義無咎也。",
                    "小象曰：七日得，以中道也。",
                    "小象曰：三年克之，惫也。",
                    "小象曰：終日戒，有所疑也。",
                    "小象曰：東鄰殺牛，不如西鄰之時也。",
                    "小象曰：濡其首，厲，何可久也。"
                ]
            },
            "未濟": {
                "guaCi": "未濟，亨。小狐汔濟，濡其尾，無攸利。",
                "xiangZhuan": "火在水上，未濟；君子以慎辨物居方。",
                "tuanZhuan": "未濟，亨，柔得中也。小狐汔濟，未出中也。濡其尾，無攸利，不續終也。",
                "yaoCi": [
                    "初六：濡其尾，吝。",
                    "九二：曳其輪，貞吉。",
                    "六三：未濟，征凶，利涉大川。",
                    "九四：貞吉，悔亡，震用伐鬼方，三年有賞於大國。",
                    "六五：貞吉，無悔，君子之光，有孚，吉。",
                    "上九：有孚于飲酒，無咎，濡其首，有孚失是。"
                ],
                "yaoXiang": [
                    "小象曰：濡其尾，亦不知極也。",
                    "小象曰：九二貞吉，中以行正也。",
                    "小象曰：征凶，位不當也。",
                    "小象曰：貞吉，悔亡，志行也。",
                    "小象曰：君子之光，其輝吉也。",
                    "小象曰：飲酒濡首，亦不知節也。"
                ]
            }
        };

        function drawStalks(num, divided = false, splitX = -1, targetCtx = ctx, color = '#0F0') {
            targetCtx.clearRect(0, 0, targetCtx.canvas.width, targetCtx.canvas.height);
            const stalkWidth = targetCtx.canvas.width / (num > 1 ? 50 : 2);
            for (let i = 0; i < num; i++) {
                let x = i * stalkWidth + stalkWidth / 2;
                if (divided && splitX >= 0) {
                    if (x < splitX) {
                        targetCtx.strokeStyle = '#00F'; // 左堆藍色
                    } else {
                        targetCtx.strokeStyle = '#F00'; // 右堆紅色
                    }
                } else {
                    targetCtx.strokeStyle = color; // 默認綠色或指定顏色
                }
                targetCtx.beginPath();
                targetCtx.moveTo(x, 20);
                targetCtx.lineTo(x, 180);
                targetCtx.stroke();
            }
        }

        function updateInfo(text) {
            stepInfo.innerHTML = `<p><strong>當前步驟：</strong> ${text}</p>`;
        }

        function getGuaIndex(yaos) {
            let binary = yaos.map(y => (y % 2 === 1 ? 1 : 0)).reverse().join('');
            return parseInt(binary, 2);
        }

        function getBenGua(yaos) {
            return guaNames[getGuaIndex(yaos)];
        }

        function getBianGua(yaos) {
            let bianYaos = yaos.map(y => {
                if (y === 9) return 8; // 老陽變陰
                if (y === 6) return 7; // 老陰變陽
                return y;
            });
            return guaNames[getGuaIndex(bianYaos)];
        }

        function displayYao(yao, withType = false) {
            let symbol;
            let typeText = '';
            if (yao === 9) {
                symbol = '<span class="yao old">——o——</span>';
                typeText = ' (老陽)';
            } else if (yao === 7) {
                symbol = '<span class="yao">—————</span>';
                typeText = ' (少陽)';
            } else if (yao === 8) {
                symbol = '<span class="yao">-- --</span>';
                typeText = ' (少陰)';
            } else if (yao === 6) {
                symbol = '<span class="yao old">--x--</span>';
                typeText = ' (老陰)';
            }
            return withType ? symbol + typeText : symbol;
        }

        function updateCurrentYaos() {
            let display = '';
            for (let i = yaos.length - 1; i >= 0; i--) {
                display += `第${i + 1}爻（下起）：${displayYao(yaos[i], true)}<br>`;
            }
            yaosList.innerHTML = display;
        }

        function showResult() {
            let benGuaName = getBenGua(yaos);
            let bianGuaName = getBianGua(yaos);
            let guaDisplay = '<div class="gua"><h3 class="collapsible">' + benGuaName + ' <span class="tooltip">[展開/收起]<span class="tooltiptext">點擊展開或收起卦的詳細內容</span></span></h3>';
            guaDisplay += '<div class="content">';
            guaDisplay += '<p class="gua-ci"><strong>卦辭：</strong> ' + (guaData[benGuaName]?.guaCi || '無資料，請參考周易原文') + '</p>';
            guaDisplay += '<p class="xiang-zhuan"><strong>象傳：</strong> ' + (guaData[benGuaName]?.xiangZhuan || '無資料，請參考周易原文') + '</p>';
            for (let i = 5; i >= 0; i--) {
                guaDisplay += `<div class="yao-text">${displayYao(yaos[i])} 第${i + 1}爻<br>`;
                guaDisplay += `<strong>爻辭：</strong> ${guaData[benGuaName]?.yaoCi[i] || '無資料，請參考周易原文'}<br>`;
                guaDisplay += `<strong>象傳：</strong> ${guaData[benGuaName]?.yaoXiang[i] || '無資料，請參考周易原文'}</div>`;
            }
            guaDisplay += '</div></div>';

            guaDisplay += '<div class="gua"><h3 class="collapsible">' + bianGuaName + ' <span class="tooltip">[展開/收起]<span class="tooltiptext">點擊展開或收起卦的詳細內容</span></span></h3>';
            guaDisplay += '<div class="content">';
            guaDisplay += '<p class="gua-ci"><strong>卦辭：</strong> ' + (guaData[bianGuaName]?.guaCi || '無資料，請參考周易原文') + '</p>';
            guaDisplay += '<p class="xiang-zhuan"><strong>象傳：</strong> ' + (guaData[bianGuaName]?.xiangZhuan || '無資料，請參考周易原文') + '</p>';
            let bianYaos = yaos.map(y => (y === 9 ? 8 : (y === 6 ? 7 : y)));
            for (let i = 5; i >= 0; i--) {
                guaDisplay += `<div class="yao-text">${displayYao(bianYaos[i])} 第${i + 1}爻<br>`;
                guaDisplay += `<strong>爻辭：</strong> ${guaData[bianGuaName]?.yaoCi[i] || '無資料，請參考周易原文'}<br>`;
                guaDisplay += `<strong>象傳：</strong> ${guaData[bianGuaName]?.yaoXiang[i] || '無資料，請參考周易原文'}</div>`;
            }
            guaDisplay += '</div></div>';

            result.innerHTML = guaDisplay;

            // Add collapsible functionality
            document.querySelectorAll('.collapsible').forEach(button => {
                button.addEventListener('click', function() {
                    const content = this.nextElementSibling;
                    content.classList.toggle('show');
                });
            });
        }

        canvas.addEventListener('click', (e) => {
            if (state === 'divide') {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                leftPile = Math.floor(x / (canvas.width / stalks)) + 1; // 根據點擊位置計算左堆
                rightPile = stalks - leftPile;
                if (leftPile < 1 || rightPile < 1) {
                    alert('請確保兩堆至少各有一根！');
                    return;
                }
                drawStalks(stalks, true, x);
                updateInfo(`已分成左堆(${leftPile})和右堆(${rightPile})。象徵陰陽兩儀。點擊下一步。`);
                nextStepBtn.disabled = false;
            }
        });

        startBtn.addEventListener('click', () => {
            stalks = 49;
            totalStalks = 49;
            currentChange = 0;
            currentYao = 0;
            yaos = [];
            remainders = [];
            state = 'divide';
            drawStalks(49);
            updateInfo('分而為二：點擊畫布位置分堆。象徵陰陽兩儀。');
            nextStepBtn.disabled = true;
            yaosList.innerHTML = '';
            result.innerHTML = '';
        });

        resetBtn.addEventListener('click', () => {
            if (currentChange === 0) stalks = totalStalks;
            drawStalks(stalks);
            leftPile = 0;
            rightPile = 0;
            hung = 0;
            state = 'divide';
            updateInfo('重置步驟。分而為二：點擊畫布位置分堆。');
            nextStepBtn.disabled = true;
        });

        nextStepBtn.addEventListener('click', () => {
            if (state === 'divide') {
                // 掛一
                hung = 1;
                rightPile -= 1;
                updateInfo(`掛一：從右堆取1根掛起(${hung})。象徵天、地、人三才。剩下左${leftPile}，右${rightPile}。點擊下一步。`);
                state = 'hang';
            } else if (state === 'hang') {
                // 揲四
                let leftRem = leftPile % 4 || 4;
                let rightRem = rightPile % 4 || 4;
                remainders.push(leftRem + rightRem + hung);
                stalks -= (leftRem + rightRem + hung);
                updateInfo(`揲四：左餘${leftRem}，右餘${rightRem}，加掛1，共減${leftRem + rightRem + hung}。象徵四時與閏。剩下${stalks}根。點擊下一步。`);
                drawStalks(stalks);
                state = 'count';
            } else if (state === 'count') {
                currentChange++;
                if (currentChange < 3) {
                    // 繼續下一次變
                    leftPile = 0;
                    rightPile = 0;
                    hung = 0;
                    state = 'divide';
                    updateInfo(`第${currentChange + 1}次變：分而為二。點擊畫布位置分堆。`);
                    nextStepBtn.disabled = true;
                } else {
                    // 計算爻
                    let yaoValue = stalks / 4;
                    yaos.push(yaoValue);
                    updateInfo(`第${currentYao + 1}爻：${yaoValue} (${yaoValue === 9 ? '老陽' : yaoValue === 8 ? '少陰' : yaoValue === 7 ? '少陽' : '老陰'})。`);
                    updateCurrentYaos();
                    currentYao++;
                    currentChange = 0;
                    totalStalks = 49; // 重置為新爻
                    stalks = 49; // 每爻從49開始
                    remainders = [];
                    if (currentYao < 6) {
                        state = 'divide';
                        drawStalks(49);
                        updateInfo(`開始第${currentYao + 1}爻：分而為二。點擊畫布位置分堆。`);
                        nextStepBtn.disabled = true;
                    } else {
                        showResult();
                        updateInfo('占卜完成！見結果。');
                        nextStepBtn.disabled = true;
                    }
                }
            } else {
                state = 'divide';
            }
        });

        // 初始
        drawStalks(49);
        drawStalks(1, false, -1, taijiCtx, '#FFD700'); // 金色顯示太極蓍草
        updateInfo('點擊"開始新卦"開始。');
    </script>
</body>
</html>